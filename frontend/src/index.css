/* O.D.I.N. — Industrial Control System Theme ("Forge") */

/* Fonts — IBM Plex for that technical/industrial feel */
@import url('https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:ital,wght@0,400;0,500;0,600;0,700;1,400&family=IBM+Plex+Sans:wght@300;400;500;600;700&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Roboto:wght@300;400;500;700&family=Open+Sans:wght@300;400;600;700&family=Lato:wght@300;400;700&family=Montserrat:wght@300;400;500;600;700&family=Poppins:wght@300;400;500;600;700&family=Raleway:wght@300;400;500;600;700&family=Nunito:wght@300;400;600;700&family=Source+Sans+3:wght@300;400;600;700&family=DM+Sans:wght@400;500;700&family=Space+Grotesk:wght@300;400;500;600;700&family=Outfit:wght@300;400;500;600;700&family=Urbanist:wght@300;400;500;600;700&family=Oswald:wght@300;400;500;600;700&family=Playfair+Display:wght@400;500;600;700&family=Merriweather:wght@300;400;700&family=Lora:wght@400;500;600;700&family=Crimson+Text:wght@400;600;700&family=Source+Serif+4:wght@300;400;600;700&family=JetBrains+Mono:wght@400;500;600;700&family=Fira+Code:wght@400;500;600;700&family=Source+Code+Pro:wght@400;500;600;700&family=Space+Mono:wght@400;700&family=Inconsolata:wght@400;500;600;700&display=swap');

:root {
  /* Brand colors — Forge palette defaults */
  --brand-primary: #d97706;
  --brand-accent: #f59e0b;
  --brand-sidebar-bg: #0a0c10;
  --brand-sidebar-border: #1a2030;
  --brand-sidebar-text: #8b95a8;
  --brand-sidebar-active-bg: #1a203040;
  --brand-sidebar-active-text: #f59e0b;
  --brand-content-bg: #0a0c10;
  --brand-card-bg: #0f1218;
  --brand-card-border: #1a2030;
  --brand-text-primary: #e8ecf2;
  --brand-text-secondary: #8b95a8;
  --brand-text-muted: #364155;
  --brand-input-bg: #1a2030;
  --brand-input-border: #252d3d;
  /* Chart theming */
  --chart-card-bg: rgba(17,24,39,0.8);
  --chart-grid: #1F2937;
  --chart-axis: #6B7280;
  --chart-axis-line: #374151;
  --chart-tooltip-bg: #111827;
  --chart-tooltip-border: #374151;
  --chart-tooltip-shadow: 0 10px 25px rgba(0,0,0,0.5);
  /* Brand fonts — IBM Plex */
  --brand-font-display: 'IBM Plex Mono', ui-monospace, monospace;
  --brand-font-body: 'IBM Plex Sans', system-ui, sans-serif;
  --brand-font-mono: 'IBM Plex Mono', ui-monospace, monospace;
  /* Farm palette (R G B — space-separated for Tailwind alpha support) */
  --farm-50: 244 246 249;
  --farm-100: 232 236 242;
  --farm-200: 212 218 228;
  --farm-300: 184 194 208;
  --farm-400: 139 149 168;
  --farm-500: 74 85 104;
  --farm-600: 54 65 85;
  --farm-700: 37 45 61;
  --farm-800: 26 32 48;
  --farm-900: 15 18 24;
  --farm-950: 10 12 16;
}

@tailwind base;
@tailwind components;
@tailwind utilities;

/* Base styles */
@layer base {
  body {
    @apply antialiased;
    font-family: 'IBM Plex Sans', system-ui, -apple-system, sans-serif;
    background: rgb(var(--farm-950));
    color: rgb(var(--farm-300));
  }
  
  h1, h2, h3, h4, h5, h6 {
    font-family: 'IBM Plex Mono', ui-monospace, monospace;
    letter-spacing: 0.02em;
  }
  
  code, pre, .mono {
    font-family: 'IBM Plex Mono', ui-monospace, monospace;
  }

  /* Make inputs sharper */
  input, select, textarea {
    border-radius: 4px !important;
  }

  /* Sharpen all buttons */
  button {
    border-radius: 4px;
  }
}

/* Control room mode — hide sidebar and header */
.control-room-mode aside[role="navigation"],
.control-room-mode aside[role="navigation"] + div > [role="toolbar"] {
  display: none !important;
}

/* Table row striping — subtle alternating rows */
@layer components {
  .table-industrial tbody tr:nth-child(even) {
    background-color: rgb(var(--farm-950) / 0.4);
  }
  .table-industrial tbody tr {
    @apply border-b border-farm-800;
    transition: background-color 0.1s ease;
  }
  .table-industrial tbody tr:hover {
    background-color: rgb(var(--farm-800) / 0.5);
  }
  .table-industrial thead {
    @apply bg-farm-950 border-b border-farm-800;
  }
  .table-industrial th {
    @apply text-xs font-medium text-farm-400 uppercase tracking-wider;
  }
}

/* Custom scrollbar — industrial thin */
@layer utilities {
  .scrollbar-thin {
    scrollbar-width: thin;
    scrollbar-color: rgb(var(--farm-700)) transparent;
  }
  
  .scrollbar-thin::-webkit-scrollbar {
    width: 5px;
    height: 5px;
  }
  
  .scrollbar-thin::-webkit-scrollbar-track {
    background: transparent;
  }
  
  .scrollbar-thin::-webkit-scrollbar-thumb {
    background-color: rgb(var(--farm-700));
    border-radius: 3px;
  }
  
  .scrollbar-thin::-webkit-scrollbar-thumb:hover {
    background-color: #b45309;
  }
}

/* Global scrollbar styling */
::-webkit-scrollbar {
  width: 5px;
  height: 5px;
}
::-webkit-scrollbar-track {
  background: rgb(var(--farm-950));
}
::-webkit-scrollbar-thumb {
  background: rgb(var(--farm-700));
  border-radius: 3px;
}
::-webkit-scrollbar-thumb:hover {
  background: #b45309;
}

/* Timeline grid */
.timeline-grid {
  display: grid;
  grid-template-columns: 120px repeat(var(--slot-count, 48), minmax(40px, 1fr));
  gap: 1px;
  background: rgb(var(--farm-800));
}

.timeline-slot {
  min-height: 48px;
  transition: background-color 0.15s ease;
}

.timeline-slot:hover {
  filter: brightness(1.1);
}

/* Job card animations */
.job-card {
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.job-card:hover {
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
}

/* Status indicators — industrial glow */
.status-dot {
  @apply w-2 h-2 rounded-full;
  box-shadow: 0 0 4px currentColor;
}

.status-dot.pending { @apply bg-status-pending; }
.status-dot.scheduled { @apply bg-status-scheduled; }
.status-dot.printing { 
  @apply bg-status-printing; 
  animation: statusPulse 2s ease-in-out infinite;
}
.status-dot.completed { @apply bg-status-completed; }
.status-dot.failed { @apply bg-status-failed; }

@keyframes statusPulse {
  0%, 100% { opacity: 1; box-shadow: 0 0 4px currentColor; }
  50% { opacity: 0.6; box-shadow: 0 0 8px currentColor; }
}

/* Color swatch */
.color-swatch {
  @apply w-4 h-4 rounded-sm border border-farm-700;
}

/* Loading skeleton */
.skeleton {
  @apply bg-farm-800 rounded;
  animation: skeletonPulse 1.5s ease-in-out infinite;
}

@keyframes skeletonPulse {
  0%, 100% { opacity: 0.4; }
  50% { opacity: 0.7; }
}

/* Drag and drop feedback */
.drop-target {
  @apply ring-2 ring-print-500 ring-opacity-50;
}

.dragging {
  @apply opacity-50 cursor-grabbing;
}

/* Focus rings — amber instead of blue */
*:focus-visible {
  outline: 2px solid #d97706;
  outline-offset: 2px;
}

/* Selection color */
::selection {
  background: #b4530940;
  color: #fbbf24;
}

/* ============================================
   Light mode overrides — True Light Theme
   Farm palette auto-adapts via CSS variables.
   Only status/semantic colors and non-Tailwind
   elements need explicit overrides here.
   ============================================ */

html.light {
  /* Brand surface variables */
  --brand-primary: #b45309;
  --brand-accent: #d97706;
  --brand-sidebar-bg: #f8fafc;
  --brand-sidebar-border: #e2e8f0;
  --brand-sidebar-text: #1e293b;
  --brand-sidebar-active-bg: #fff7ed;
  --brand-sidebar-active-text: #b45309;
  --brand-content-bg: #f1f5f9;
  --brand-card-bg: #ffffff;
  --brand-card-border: #e2e8f0;
  --brand-text-primary: #0f172a;
  --brand-text-secondary: #475569;
  --brand-text-muted: #94a3b8;
  --brand-input-bg: #f8fafc;
  --brand-input-border: #cbd5e1;
  /* Chart theming */
  --chart-card-bg: #ffffff;
  --chart-grid: #E2E8F0;
  --chart-axis: #64748b;
  --chart-axis-line: #CBD5E1;
  --chart-tooltip-bg: #ffffff;
  --chart-tooltip-border: #E2E8F0;
  --chart-tooltip-shadow: 0 4px 12px rgba(0,0,0,0.1);
  --brand-font-display: inherit;
  --brand-font-body: inherit;
  --brand-font-mono: inherit;
  /* Farm palette — inverted for light backgrounds */
  --farm-50: 2 6 23;
  --farm-100: 15 23 42;
  --farm-200: 30 41 59;
  --farm-300: 51 65 85;
  --farm-400: 71 85 105;
  --farm-500: 100 116 139;
  --farm-600: 148 163 184;
  --farm-700: 203 213 225;
  --farm-800: 226 232 240;
  --farm-900: 255 255 255;
  --farm-950: 248 250 252;
}

/* Inputs — blanket light override */
html.light input, html.light select, html.light textarea {
  background-color: #f8fafc;
  border-color: #cbd5e1;
  color: #1e293b;
}

/* Card elevation — subtle shadow on white cards */
html.light .bg-farm-900 {
  box-shadow: 0 1px 3px rgba(0,0,0,0.06), 0 1px 2px rgba(0,0,0,0.04);
}

/* --- Status / semantic color remapping --- */

/* Red — errors, failures */
html.light .bg-red-900\/30 { background-color: #fef2f2; }
html.light .bg-red-900\/50 { background-color: #fee2e2; }
html.light .text-red-400 { color: #dc2626; }
html.light .text-red-300 { color: #ef4444; }
html.light .text-red-500 { color: #b91c1c; }
html.light .border-red-700\/30 { border-color: #fca5a5; }
html.light .border-red-500\/30 { border-color: #fecaca; }
html.light .border-red-800 { border-color: #fca5a5; }

/* Green — success, online */
html.light .bg-green-900\/30 { background-color: #f0fdf4; }
html.light .bg-green-900\/50 { background-color: #dcfce7; }
html.light .text-green-400 { color: #16a34a; }
html.light .text-green-300 { color: #22c55e; }
html.light .text-green-500 { color: #15803d; }
html.light .border-green-700\/30 { border-color: #86efac; }
html.light .border-green-500\/30 { border-color: #bbf7d0; }
html.light .border-green-800 { border-color: #86efac; }

/* Blue — info, active */
html.light .bg-blue-900\/30 { background-color: #eff6ff; }
html.light .bg-blue-900\/50 { background-color: #dbeafe; }
html.light .text-blue-400 { color: #2563eb; }
html.light .text-blue-300 { color: #3b82f6; }
html.light .text-blue-500 { color: #1d4ed8; }
html.light .border-blue-700\/30 { border-color: #93c5fd; }
html.light .border-blue-500\/30 { border-color: #bfdbfe; }
html.light .border-blue-800 { border-color: #93c5fd; }

/* Amber — warnings */
html.light .bg-amber-900\/30 { background-color: #fef3c7; }
html.light .bg-amber-900\/50 { background-color: #fde68a; }
html.light .text-amber-400 { color: #d97706; }
html.light .text-amber-300 { color: #f59e0b; }
html.light .text-amber-500 { color: #b45309; }
html.light .border-amber-700\/30 { border-color: #fcd34d; }
html.light .border-amber-500\/30 { border-color: #fde68a; }

/* Purple — special states */
html.light .bg-purple-900\/30 { background-color: #faf5ff; }
html.light .bg-purple-900\/50 { background-color: #f3e8ff; }
html.light .text-purple-400 { color: #9333ea; }
html.light .text-purple-300 { color: #a855f7; }
html.light .border-purple-700\/30 { border-color: #d8b4fe; }

/* Yellow */
html.light .bg-yellow-900\/30 { background-color: #fefce8; }
html.light .bg-yellow-900\/50 { background-color: #fef9c3; }
html.light .text-yellow-400 { color: #ca8a04; }
html.light .text-yellow-300 { color: #eab308; }

/* Print accent (brand amber) */
html.light .text-print-400 { color: #b45309; }
html.light .text-print-500 { color: #92400e; }
html.light .bg-print-900\/30 { background-color: #fffbeb; }
html.light .bg-print-900\/50 { background-color: #fef3c7; }
html.light .border-print-700\/30 { border-color: #fcd34d; }
html.light .border-print-500 { border-color: #f59e0b; }

/* --- Non-Tailwind elements --- */

/* Focus ring */
html.light *:focus-visible {
  outline-color: #b45309;
}

/* Selection */
html.light ::selection {
  background: #fde68a;
  color: #451a03;
}

/* Job card hover */
html.light .job-card:hover {
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
}
